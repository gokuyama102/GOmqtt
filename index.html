<!DOCTYPE html>
<html lang="en-US">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, 
    user-scalable=0">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="images/icons-192.png">
    <link rel="apple-touch-icon" sizes="192x192" href="images/icons-192.png">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/forms.css">
    <link rel="shortcut icon" href="images/favicon.ico" type="image/x-icon">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.13.0/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>
    <script defer src="js/test.js"></script>
    <script defer src="js/chartstest.js"></script>
    <script defer src="js/ServiceWorker.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>
    <script defer src="js/UIcontrols.js" type="text/javascript"></script>
    <script defer src="js/mqtt.js" type="text/javascript"></script>
    <script type="text/javascript" src="sensorImg.js"></script>
    <title>IOLM Demo</title>
</head>

<body>

    <main>

        <div class="geral" id="PortMonitor">
            <h1>IOLM Port Monitor</h1>
            <div class="portMonitorFrame">


                <div id="framePort1" class="framePort">
                    <img class="portImage" id="pImage1"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port1" class="port">
                        <strong>Port 1</strong>
                        <br>Device: <a id="port1/prodname"></a>
                        <br>Serial: <a id="port1/serial"></a>
                        <br>Status: <a id="port1/status"></a>
                        <diagnostic id="diagPort1">
                            <br>PDI: <a id="port1/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort2" class="framePort">
                    <img class="portImage" id="pImage2"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port2" class="port">
                        <strong>Port 2</strong>
                        <br>Device: <a id="port2/prodname"></a>
                        <br>Serial: <a id="port2/serial"></a>
                        <br>Status: <a id="port2/status"></a>
                        <diagnostic id="diagPort2">
                            <br>PDI: <a id="port2/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort3" class="framePort">
                    <img class="portImage" id="pImage3"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port3" class="port">
                        <strong>Port 3</strong>
                        <br>Device: <a id="port3/prodname"></a>
                        <br>Serial: <a id="port3/serial"></a>
                        <br>Status: <a id="port3/status"></a>
                        <diagnostic id="diagPort3">
                            <br>PDI: <a id="port3/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort4" class="framePort">
                    <img class="portImage" id="pImage4"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port4" class="port">
                        <strong>Port 4</strong>
                        <br>Device: <a id="port4/prodname"></a>
                        <br>Serial: <a id="port4/serial"></a>
                        <br>Status: <a id="port4/status"></a>
                        <diagnostic id="diagPort4">
                            <br>PDI: <a id="port4/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort5" class="framePort">
                    <img class="portImage" id="pImage5"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port5" class="port">
                        <strong>Port 5</strong>
                        <br>Device: <a id="port5/prodname"></a>
                        <br>Serial: <a id="port5/serial"></a>
                        <br>Status: <a id="port5/status"></a>
                        <diagnostic id="diagPort5">
                            <br>PDI: <a id="port5/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort6" class="framePort">
                    <img class="portImage" id="pImage6"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port6" class="port">
                        <strong>Port 6</strong>
                        <br>Device: <a id="port6/prodname"></a>
                        <br>Serial: <a id="port6/serial"></a>
                        <br>Status: <a id="port6/status"></a>
                        <diagnostic id="diagPort6">
                            <br>PDI: <a id="port6/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort7" class="framePort">
                    <img class="portImage" id="pImage7"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port7" class="port">
                        <strong>Port 7</strong>
                        <br>Device: <a id="port7/prodname"></a>
                        <br>Serial: <a id="port7/serial"></a>
                        <br>Status: <a id="port7/status"></a>
                        <diagnostic id="diagPort7">
                            <br>PDI: <a id="port7/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
                <div id="framePort8" class="framePort">
                    <img class="portImage" id="pImage8"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p id="port8" class="port">
                        <strong>Port 8</strong>
                        <br>Device: <a id="port8/prodname"></a>
                        <br>Serial: <a id="port8/serial"></a>
                        <br>Status: <a id="port8/status"></a>
                        <diagnostic id="diagPort8">
                            <br>PDI: <a id="port8/pdi"></a>
                        </diagnostic>
                    </p>
                </div>
            </div>
        </div>

        <div class="geral hide" id="PortDetails">
            <h1 class="geral hide" id="PortDetailsTitle">Detailed Information - Port 3</h1>
            <div class="portMonitorFrame hide">
                <div class="framePort">
                    <h2 class="frameTitle">Device Identification</h2>
                    <img class="portImage" id="pImage1"
                        src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs%3D">
                    <p>
                        Device: <a href="" id="prodname"></a><br>
                        Product ID: <a href="" id="prodid"></a><br>
                        Product Text: <a href="" id="prodText"></a><br>
                        Serial Number: <a href="" id="serial"></a><br>
                        Vendor: <a href="" id="vendname"></a><br>
                        Vendor ID: <a href="" id="vendorid"></a><br>
                        Vendor Text: <a href="" id="vendtext"></a><br>
                        AppTag: <a href="" id="apptag"></a><br>
                        HW Version: <a href="" id="hwvers"></a><br>
                        FW Version: <a href="" id="fwvers"></a><br>
                        IO-Link Version: <a href="" id="iolinkvers"></a>
                    </p>
                </div>
                <div class="framePort">
                    <h2 class="frameTitle">Detailed Process Data</h2>
                </div>
                <div class="framePort">
                    <h2 class="frameTitle">PDI Trend</h2>
                    <div class="framePort chhart">
                        <canvas id="myChart" width="400" height="400"></canvas>
                    </div>
                </div>
                <div class="framePort">
                    <h2 class="frameTitle">Event Log</h2>
                </div>
            </div>
        </div>

        <div class="geral" id="DataExplorer">
            <h1>MQTT Data Explorer</h1>
            <ul id="myUL"> </ul>
        </div>

        <div class="geral" id="Datalogger">
            <h1>MQTT Datalogger</h1>
            <p id="log"></p>
        </div>
    </main>

    <nav class="navbar">
        <ul class="navbar-nav">
            <li class="logo">
                <a href="#" class="nav-link">
                    <span class="link-text logo-text">IOLM DEMO</span>
                    <svg aria-hidden="true" focusable="false" data-prefix="fad" data-icon="angle-double-right"
                        role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"
                        class="svg-inline--fa fa-angle-double-right fa-w-14 fa-5x">
                        <g class="fa-group">
                            <path fill="currentColor"
                                d="M224 273L88.37 409a23.78 23.78 0 0 1-33.8 0L32 386.36a23.94 23.94 0 0 1 0-33.89l96.13-96.37L32 159.73a23.94 23.94 0 0 1 0-33.89l22.44-22.79a23.78 23.78 0 0 1 33.8 0L223.88 239a23.94 23.94 0 0 1 .1 34z"
                                class="fa-primary"></path>
                            <path fill="currentColor"
                                d="M415.89 273L280.34 409a23.77 23.77 0 0 1-33.79 0L224 386.26a23.94 23.94 0 0 1 0-33.89L320.11 256l-96-96.47a23.94 23.94 0 0 1 0-33.89l22.52-22.59a23.77 23.77 0 0 1 33.79 0L416 239a24 24 0 0 1-.11 34z"
                                class="fa-primary"></path>
                        </g>
                    </svg>
                </a>
            </li>

            <li class="nav-item" onclick="MenuPortStatus()">
                <a href="#" class="nav-link">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
                        <path fill="currentColor"
                            d="M528 0H48C21.5 0 0 21.5 0 48v320c0 26.5 21.5 48 48 48h192l-16 48h-72c-13.3 0-24 10.7-24 24s10.7 24 24 24h272c13.3 0 24-10.7 24-24s-10.7-24-24-24h-72l-16-48h192c26.5 0 48-21.5 48-48V48c0-26.5-21.5-48-48-48zm-16 352H64V64h448v288z"
                            class="fa-primary" />
                    </svg>
                    <span class="link-text">IOLM Port Monitor</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="#" class="nav-link" onclick="MenuDataExplorer()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="currentColor"
                            d="M16 128h416c8.84 0 16-7.16 16-16V48c0-8.84-7.16-16-16-16H16C7.16 32 0 39.16 0 48v64c0 8.84 7.16 16 16 16zm480 80H80c-8.84 0-16 7.16-16 16v64c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-64c0-8.84-7.16-16-16-16zm-64 176H16c-8.84 0-16 7.16-16 16v64c0 8.84 7.16 16 16 16h416c8.84 0 16-7.16 16-16v-64c0-8.84-7.16-16-16-16z"
                            class="fa-primary" />
                    </svg>
                    <span class="link-text">MQTT Data Explorer</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="#" class="nav-link" onclick="MenuDatalogger()">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                        <path fill="currentColor"
                            d="M504 255.531c.253 136.64-111.18 248.372-247.82 248.468-59.015.042-113.223-20.53-155.822-54.911-11.077-8.94-11.905-25.541-1.839-35.607l11.267-11.267c8.609-8.609 22.353-9.551 31.891-1.984C173.062 425.135 212.781 440 256 440c101.705 0 184-82.311 184-184 0-101.705-82.311-184-184-184-48.814 0-93.149 18.969-126.068 49.932l50.754 50.754c10.08 10.08 2.941 27.314-11.313 27.314H24c-8.837 0-16-7.163-16-16V38.627c0-14.254 17.234-21.393 27.314-11.314l49.372 49.372C129.209 34.136 189.552 8 256 8c136.81 0 247.747 110.78 248 247.531zm-180.912 78.784l9.823-12.63c8.138-10.463 6.253-25.542-4.21-33.679L288 256.349V152c0-13.255-10.745-24-24-24h-16c-13.255 0-24 10.745-24 24v135.651l65.409 50.874c10.463 8.137 25.541 6.253 33.679-4.21z"
                            class="fa-primary" />
                    </svg>

                    <span class="link-text">MQTT Datalogger</span>
                </a>
            </li>

            <li class="nav-item">
                <a href="#" class="nav-link" onclick="ShowPublish()">
                    <svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="envelope"
                        class="svg-inline--fa fa-envelope fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512">
                        <path fill="currentColor"
                            d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"
                            class="fa-primary">
                        </path>
                    </svg>

                    <span class="link-text">Publish</span>
                </a>
            </li>

            <li class="nav-item" onclick="ShowSettings()">
                <a href="#" class="nav-link">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="cog"
                        class="svg-inline--fa fa-cog fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 512 512">
                        <path fill="currentColor"
                            d="M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"
                            class="fa-primary">
                        </path>
                    </svg>
                    <span class="link-text">Connection Settings</span>
                </a>
            </li>
        </ul>
    </nav>

    <form id="Settings" autocomplete="on">
        <label class="formtitle">Connection Settings</label>
        <label for="fhost" class="flexitem">Host:</label>
        <input type="text" id="fhost" name="fhost" class="flexinput emptyItem" placeholder="example.MQTTservice.com"
            oninput="foolProofing(this)">
        <label for="fport" class="flexitem">Port:</label>
        <input type="number" id="fport" name="fport" class="flexinput" value=443 placeholder="Port number"
            oninput="foolProofing(this)">
        <label for="fname" class="flexitem">Username:</label>
        <input type="text" id="fname" name="fname" class="flexinput emptyItem" placeholder="Type your username"
            oninput="foolProofing(this)">
        <label for="fpassword" class="flexitem">Password:</label>
        <input type="password" id="fpassword" name="fpassword" class="flexinput emptyItem"
            placeholder="Type your password" oninput="foolProofing(this)">
        <div class="buttonrow">
            <button type="button" class="flexitem" id="fbtConnect" onclick="connectBroker()">Connect</button>
            <button type="button" class="flexitem" onclick="HideSettings()">Close</button>
        </div>
    </form>

    <form id="Publish" autocomplete="on">
        <label class="formtitle">Publish</label>
        <label for="ftopic" class="flexitem">Topic:</label>
        <input type="text" id="ftopic" name="ftopic" class="flexinput emptyItem" oninput="foolProofing(this)"
            placeholder="Type the desired topic">
        <label for="fjson" class="flexitem" oninput="foolProofing(this)">JSON:</label>
        <textarea type="text" id="fjson" name="fjson" class="flexinput" rows="8">
{

}</textarea>
        <div class="buttonrow">
            <div class="buttonrow">
                <label for="fqos" class="flexitem">QOS:</label>
                <select type="number" id="fqos" name="fqos" class="flexitem inline">
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                </select>
                <label for="fretain" class="flexitem">Retain:</label>
                <input type="checkbox" id="fretain" name="fretain" class="flexitem inline">
            </div>
        </div>
        <div class="buttonrow">
            <button type="button" class="flexitem" id="fbtPublish"
                onclick="publish(document.getElementById('ftopic').value,document.getElementById('fjson').value,document.getElementById('fqos').value,document.getElementById('fretain').value)">Publish</button>
            <button type="button" class="flexitem" onclick="HidePublish()">Close</button>
        </div>
    </form>

    <dialog id="statusWindow">
        <div>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path fill="currentColor"
                    d="M500.33 0h-47.41a12 12 0 0 0-12 12.57l4 82.76A247.42 247.42 0 0 0 256 8C119.34 8 7.9 119.53 8 256.19 8.1 393.07 119.1 504 256 504a247.1 247.1 0 0 0 166.18-63.91 12 12 0 0 0 .48-17.43l-34-34a12 12 0 0 0-16.38-.55A176 176 0 1 1 402.1 157.8l-101.53-4.87a12 12 0 0 0-12.57 12v47.41a12 12 0 0 0 12 12h200.33a12 12 0 0 0 12-12V12a12 12 0 0 0-12-12z">
                </path>
            </svg>
            <div id="statusMessage">Connecting</div>
        </div>
    </dialog>


</body>

</html>